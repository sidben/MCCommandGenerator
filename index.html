<!doctype html>
<html>

<head>
	<title>Minecraft Command Generator</title>
	<meta charset="utf-8" />
	<meta name="author" content="Sidney Benetti">

<!-- TODO: CSS/LESS file -->
<style type="text/css">
h1 		{ font: bold 20px arial }
body 	{ font: normal 14px Calibri; line-height: 130%; }

.boxGeneric { border: 1px solid #ccc; padding: 10px; margin: 8px 0; background: #eee; }
.boxPortrait { background: #fff; width: 150px; height: 150px; margin: 5px; overflow: hidden; border: 1px solid #ccc; display: inline-block; cursor: pointer; }
.boxPortrait img { width: 100%; }

#boxCommandType 	{}
#boxMobType 		{ display: none; }
#boxSpawnerCustomizer	{ display: none; }

.boxSelected		{ margin: 3px; border: 3px solid #0a0;}


#txtResult	{ width: 80%; height: 50px; background: #333; color: #0f0; padding: 4px; border: 1px solid #000; }
</style>

</head>

<body>
	<header>
		<h1>Minecraft Command Generator</h1>
	</header>

	<section>

		<div id="boxCommandType" class="boxGeneric">
			Select the type of command you want:<br/>
			<input type="radio" id="radSpawner" name="radCmdType" value="spawner"><label for="radSpawner">Create Mob Spawner</label> &nbsp;
			<input type="radio" id="radSummon" name="radCmdType" value="summon"><label for="radSummon">Summon Mob</label> &nbsp;
			<input type="radio" id="radItem" name="radCmdType" value="item"><label for="radItem">Give Item</label> &nbsp;
			<input type="radio" id="radPotion" name="radCmdType" value="potion" disabled><label for="radPotion">Give Potion</label>
		</div>


		<div id="boxMobType" class="boxGeneric">
		</div>


		<div id="boxSpawnerCustomizer"  class="boxGeneric">
			<b>Spawner parameters:</b><br/>

			<label for="txtSPWSpawnCount">Max amount of mobs per spawn:</label>
			<input type='text' id='txtSPWSpawnCount' value='' /> <br/>

			<label for="txtSPWSpawnRange">Spawn area range:</label>
			<input type='text' id='txtSPWSpawnRange' value='4' /> <br/>

			<label for="txtSPWDelayNext">Next spawn delay:</label>
			<input type='text' id='txtSPWDelayNext' value='' /> ticks <br/>

			<label for="txtSPWDelayMin">Min spawn delay:</label>
			<input type='text' id='txtSPWDelayMin' value='' /> ticks <br/>

			<label for="txtSPWDelayMax">Max spawn delay:</label>
			<input type='text' id='txtSPWDelayMax' value='' /> ticks <br/>

			<label for="txtSPWMaxMobs">Max amount of mobs around the spawner:</label>
			<input type='text' id='txtSPWMaxMobs' value='' /><br/>

			<label for="txtSPWPlayerRange">Activation range:</label>
			<input type='text' id='txtSPWPlayerRange' value='' /><br/>
		</div>





		<div id="boxResult" class="boxGeneric">
			<label for="txtResult">Command:</label><br/>
			<textarea id="txtResult"></textarea>
		</div>



		<button id="btDebug" onclick="generateCommand();">TEST (create command)</button>



	</section>

	<footer>
		version alpha 0.1
	</footer>
</body>


<script>
var txtResult 	= document.getElementById("txtResult");
var radType 	= document.getElementsByName("radCmdType");

var mcCommand = new Object();




function Mob(id, tooltip, picture) {
	this.EntityId = id;
	this.Tooltip = tooltip;
	this.Picture = picture;
}

var mobList = [];
mobList[0] = new Mob('Zombie', 'Zombie', 'zombie.png');
mobList[1] = new Mob('Skeleton', 'Skeleton', 'skeleton.png');
mobList[2] = new Mob('Spider', 'Spider', 'spider.png');
mobList[3] = new Mob('CaveSpider', 'Cave Spider', 'cave_spider.png');
mobList[4] = new Mob('Creeper', 'Creeper', 'crepper.png');
mobList[5] = new Mob('Enderman', 'Enderman', 'enderman.png');
mobList[6] = new Mob('VillagerGolem', 'Iron Golem', '150px-Village_Golem.png');
mobList[7] = new Mob('Villager', 'Villager');
mobList[8] = new Mob('Witch', 'Witch', 'witch.png');









function start() {
	var tempButton = document.getElementById("btDebug");


	//--- Attach events
	if(tempButton.addEventListener){
		tempButton.addEventListener("click", generateCommand(), true);
	}else{
		tempButton.attachEvent("click", generateCommand());
	};

	radType[0].addEventListener("click", function() { setCommandType('spawner'); }, true);
	radType[1].addEventListener("click", function() { setCommandType('summon'); }, true);
	radType[2].addEventListener("click", function() { setCommandType('item'); }, true);
	radType[3].addEventListener("click", function() { setCommandType('potion'); }, true);



	//-- Initial values
	txtResult.value = '';
	setCommandType('spawner');


	//getValueFromRadio(radType)
}


function createMobSelector() {
	var tgtBox = document.getElementById("boxMobType");
	var mobBoxHtml = '';


	tgtBox.innerHTML = "<b>Select the mob type:</b><br/>";

	for (var i=0; i<mobList.length; i++) {
		mobBoxHtml = "<div class='boxPortrait' id='mob" + i + "'>";
		mobBoxHtml += "<img src='assets/images/" + mobList[i].Picture + "' alt='" + mobList[i].Tooltip + "' title='" + mobList[i].Tooltip + "' onclick='setMainMob(" + i + ")' />";
		mobBoxHtml += "</div>";
		tgtBox.innerHTML += mobBoxHtml;
	}

	mobBoxHtml = "<div class='boxPortrait'>";
	mobBoxHtml += "*** CREATE NEW MOB (ToDo) ***";
	mobBoxHtml += "</div>";
	tgtBox.innerHTML += mobBoxHtml;

}






function setCommandType(type) {
	mcCommand.Type = type;

	switch(type) {
		case 'spawner':
			radType[0].checked = true;
			document.getElementById("boxMobType").style.display = 'block';
			document.getElementById("boxSpawnerCustomizer").style.display = 'block';
			createMobSelector();
			break;

		case 'summon':
			radType[1].checked = true;
			document.getElementById("boxMobType").style.display = 'block';
			document.getElementById("boxSpawnerCustomizer").style.display = 'none';
			createMobSelector();
			break;

		case 'item':
			radType[2].checked = true;
			document.getElementById("boxMobType").style.display = 'none';
			document.getElementById("boxSpawnerCustomizer").style.display = 'none';
			break;

		case 'potion':
			radType[3].checked = true;
			document.getElementById("boxMobType").style.display = 'none';
			document.getElementById("boxSpawnerCustomizer").style.display = 'none';
			break;

		default:
			mcCommand.type = "INVALID";
	}
}



function setMainMob(index) {
	// OBS: If in the future 'boxSelected' gets reused, change this to a loop on mobList
	var currentSelectedList = document.getElementsByClassName('boxSelected');
	for (var j=0; j<currentSelectedList.length; j++) {
		currentSelectedList[j].className = currentSelectedList[j].className.replace('boxSelected', '');
	}
	document.getElementById("mob" + index).className += ' boxSelected';


	mcCommand.MainMob = mobList[index];

}



function generateCommand() {
	var cmd = '';

	// Type of command
	switch(mcCommand.Type) {
		case 'spawner':
			//--- parameter validation
			if (mcCommand.MainMob === undefined) { showErrorMessage("No mob selected"); break; }

			//--- local variables
			var spawnCount = isNaN(document.getElementById("txtSPWSpawnCount").value) ? 0 : parseInt(document.getElementById("txtSPWSpawnCount").value);
			var spawnRange = isNaN(document.getElementById("txtSPWSpawnRange").value) ? 0 : parseInt(document.getElementById("txtSPWSpawnRange").value);
			var spawnDelay = isNaN(parseInt(document.getElementById("txtSPWDelayNext").value)) ? -99 : parseInt(document.getElementById("txtSPWDelayNext").value);
			var spawnDelayMin = isNaN(parseInt(document.getElementById("txtSPWDelayMin").value)) ? -99 : parseInt(document.getElementById("txtSPWDelayMin").value);
			var spawnDelayMax = isNaN(document.getElementById("txtSPWDelayMax").value) ? 0 : parseInt(document.getElementById("txtSPWDelayMax").value);
			var spawnMaxMobs = isNaN(document.getElementById("txtSPWMaxMobs").value) ? 0 : parseInt(document.getElementById("txtSPWMaxMobs").value);
			var spawnPlayerRange = isNaN(document.getElementById("txtSPWPlayerRange").value) ? 0 : parseInt(document.getElementById("txtSPWPlayerRange").value);

			//--- command creation
			cmd = '/setblock ~ ~ ~ minecraft:mob_spawner 0 replace {';
			cmd += 'EntityId:' + mcCommand.MainMob.EntityId;
			if (spawnCount > 0) { cmd += ', SpawnCount:' + spawnCount; }
			if (spawnRange > 0 && spawnRange != 4) { cmd += ', SpawnRange:' + spawnRange; }
			if (spawnDelay >= -1) { cmd += ', Delay:' + spawnDelay; }
			if (spawnDelayMin >= 0 && spawnDelayMax > 0 && spawnDelayMax > spawnDelayMin) { cmd += ', MinSpawnDelay:'  + spawnDelayMin + ', MaxSpawnDelay:' + spawnDelayMax; }
			if (spawnMaxMobs > 0 && spawnPlayerRange > 0) { cmd += ', MaxNearbyEntities:' + spawnMaxMobs + ', RequiredPlayerRange:' + spawnPlayerRange; }
			cmd += '}';

			break;


		case 'summon':
			cmd = '/summon ';
			cmd += 'EntityId:' + mcCommand.MainMob.EntityId;
			cmd += ' ~ ~ ~ {';
			cmd += '}';
			break;


		case 'item':
			cmd = '/give @p ';
			break;


		case 'potion':
			cmd = '/give @p ';
			break;

	}



	txtResult.value = cmd;
}




function getValueFromRadio(element) {
	for (var i=0; i<element.length; i++) {
		if (element[i].checked) { return element[i].value; }
	}
	return '';
}



function showErrorMessage(msg) {
	alert("ERROR: " + msg);
}




window.onload = start();



</script>


</html>